<krpano onstart="loadscene(get(scene[0].name), null, MERGE);">

	<!-- webvr.xml - WebVR plugin, enter/exit VR buttons, VR cursor, VR setup -->
	<include url="../plugins/webvr.xml" />

	<!-- add/overwrite some settings from the webvr.xml for this example -->
  <!-- enable the FAKE VR support to allow testing also on desktop and tablets without VR support -->
	<plugin 
    name="WebVR" 
    mobilevr_fake_support="true" 
    onentervr="setupVRDevice()" />		

	<!-- use the dragging control by default -->
	<control mousetype="drag2d" />

	<!-- the intro pano -->
	<view fovtype="VFOV" fov="90" fovmin="40" fovmax="150" />

	<events name="change_scene" keep="true" onclick="nextscene_loop(+1);" />

	<!-- hotspots -->
  <style 
    name="hotspotstyle" 
    url="../images/360-hotspot.png" 
    onover="set(url, ../images/360-hotspot-hover.png);"
    distorted="true" 
    onclick="goto(get(linkedscene));"
    vr_timeout="1000" />

  <!-- pano changing actions -->
  <action name="goto">
    loadscene(%1, null, NOPREVIEW|MERGE|KEEPMOVING, COLORBLEND(3.0, 0x000000, easeOutSine))
  </action>

  <action name="nextscene_loop">
    if(xml.scene != null AND scene.count GT 1,
    add(newsceneindex, scene[get(xml.scene)].index, %1);
    sub(lastsceneindex, scene.count, 1);
    if(newsceneindex LT 0, copy(newsceneindex,lastsceneindex));
    if(newsceneindex GT lastsceneindex, set(newsceneindex,0));
    loadscene(get(scene[get(newsceneindex)].name), null, NOPREVIEW|MERGE|KEEPMOVING, BLEND(1));
    );
  </action>

  <action name="setupVRDevice">
    webvr_onentervr();
    jscall(console.log("setupVR"));
    jscall(console.log(WebVR.devicename));
    jscall(console.log(devicename));
    <!--if(devicename == "CardBoard B");-->
  </action>

  <!-- TEMP PRE-RELEASE STUFF -->
	<display hotspotrenderer="webgl" devices="html5" />	<!-- force using WebGL for the hotspots -->
	<view continuousupdates="true" devices="html5" />	<!-- constantly update the screen (required for WebGL hotspots for the moment) -->
	<!-- TEMP PRE-RELEASE STUFF -->

</krpano>
